<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Idea Generation - Om Bhojane</title>
    <link rel="stylesheet" href="/static/css/ideastyles.css"/>
    <link rel="stylesheet" href="/static/css/ideagen.css"/>
    <link rel="stylesheet" href="/static/css/mediastyle.css" />
    <style>
        
.idea {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
}

.idea:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.1);
}

.idea h3 {
    margin-top: 0;
    color: #333;
    font-size: 1.5rem;
    margin-bottom: 1rem;
}

.idea p {
    color: #555;
    line-height: 1.6;
}

.idea ul, .idea ol {
    padding-left: 1.5rem;
    margin-bottom: 1rem;
    color: #555;
}

.idea li {
    margin-bottom: 0.5rem;
}

.idea-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 1.5rem;
}

.idea-actions button,
.idea-actions .btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    text-decoration: none;
    color: white;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    flex: 1 1 calc(33.333% - 1rem);
    min-width: 120px;
    text-align: center;
    font-size: 0.9rem;
    transition: all 0.3s ease;
}

.idea-actions .reserve-btn {
    background-color: #4CAF50;
}

.idea-actions .copy-btn {
    background-color: #008CBA;
}

.idea-actions .download-btn {
    background-color: #f44336;
}

.idea-actions button:hover,
.idea-actions .btn:hover {
    opacity: 0.9;
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .idea {
        padding: 1.5rem;
    }

    .idea-actions {
        flex-direction: column;
    }

    .idea-actions button,
    .idea-actions .btn {
        width: 100%;
        margin-bottom: 0.5rem;
    }
}

.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
}

.modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 600px;
    border-radius: 8px;
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}

#chatHistory {
    height: 300px;
    overflow-y: auto;
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 10px;
}

.chat-message {
    margin-bottom: 10px;
    padding: 5px 10px;
    border-radius: 5px;
}

.user-message {
    background-color: #e6f2ff;
    text-align: right;
}

.ai-message {
    background-color: #f0f0f0;
}

#chatInput {
    width: calc(100% - 70px);
    margin-right: 10px;
}

#sendChatButton {
    width: 60px;
}


.loading {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    font-style: italic;
    color: #888;
}

.loading::after {
    content: '...';
    width: 20px;
    text-align: left;
    animation: dots 1.5s steps(4, end) infinite;
}

@keyframes dots {
    0%, 20% {
        content: '.';
    }
    40% {
        content: '..';
    }
    60% {
        content: '...';
    }
    80%, 100% {
        content: '';
    }
}

.chat-message {
    margin-bottom: 15px;
    padding: 10px 15px;
    border-radius: 8px;
    max-width: 80%;
    word-wrap: break-word;
}

.user-message {
    background-color: #e6f2ff;
    text-align: right;
    margin-left: auto;
}

.ai-message {
    background-color: #f0f0f0;
    text-align: left;
    margin-right: auto;
}

.idea-actions {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 20px;
}

.primary-actions, .secondary-actions {
    display: flex;
    gap: 10px;
}

.btn {
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    transition: background-color 0.3s ease, transform 0.1s ease;
    flex: 1;
}

.btn:hover {
    transform: translateY(-2px);
}

.btn:active {
    transform: translateY(1px);
}

.reserve-btn {
    background-color: #4CAF50;
    color: white;
}

.chat-btn {
    background-color: #2196F3;
    color: white;
}

.copy-btn {
    background-color: #FFC107;
    color: black;
}

.download-btn {
    background-color: #9C27B0;
    color: white;
}

.social-share {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 10px;
}

.share-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: background-color 0.3s ease, transform 0.1s ease;
}

.share-btn:hover {
    background-color: rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
}

.share-btn:active {
    transform: translateY(1px);
}

.share-btn svg {
    width: 24px;
    height: 24px;
}

.twitter-share svg {
    color: #1DA1F2;
}

.whatsapp-share svg {
    color: #25D366;
}

.linkedin-share svg {
    color: #0077B5;
}

@media (max-width: 768px) {
    .idea-actions, .primary-actions, .secondary-actions {
        flex-direction: column;
    }

    .btn {
        width: 100%;
    }

    .social-share {
        justify-content: space-around;
    }
}
  </style>

 </head>
 <body>
    <nav id="desktop-nav">
        <div class="logo">Ideagen</div>
        <div>
          <ul class="nav-links">
            <li><a href="#about">About</a></li>
            <li><a href="/ideas">Ideas</a></li>
            <li><a href="#key-features">Features</a></li>
            <li><a href="/ideagen" style="border: 2px solid #333; border-radius: 50px; padding: 10px 20px;">Try Here!</a></li>
          </ul>
        </div>
      </nav>
      <nav id="hamburger-nav">
        <div class="logo">Ideagen</div>
        <div class="hamburger-menu">
          <div class="hamburger-icon" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="menu-links">
            <li><a href="#about">About</a></li>
            <li><a href="/ideas">Ideas</a></li>
            <li><a href="#key-features">Features</a></li>
            <li><a href="/ideagen" style="border: 2px solid #333; border-radius: 50px; padding: 10px 20px;">Try Here!</a></li>
          </div>
        </div>
      </nav>

    <section>
        <div style="max-width: 600px; margin: 20px auto; padding: 15px; border: 1px solid #ddd; border-radius: 8px; background-color: #f9f9f9; text-align: center;">
            <p style="margin-bottom: 15px; font-size: 16px; color: #333;">We're facing resource limitations. To use IdeaGen efficiently, please tap here:</p>
            <a href="https://omsdev.vercel.app/ideagen" style="display: inline-block; padding: 10px 20px; background-color: #23c089; color: white; text-decoration: none; border-radius: 5px; font-weight: bold; transition: background-color 0.3s ease;">Try IdeaGen Prototype</a>
          </div>
            </section>

    <section id="idea-generation">
      <h1 class="title" style="padding-bottom: 10px;">Turn Thoughts into Ideas</h1>

    

      <div class="container">
        <div class="form-container">
            <div class="form-column">
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" name="category">
                        <option value="AI">AI</option>
                        <option value="Web3/Blockchain">Web3/Blockchain</option>
                        <option value="Website">Website</option>
                        <option value="App">App</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group" id="other-category-container" style="display: none;">
                    <label for="other-category">Please specify the category</label>
                    <input type="text" id="other-category" name="other-category">
                </div>
                <div class="form-group">
                    <label for="proficiency">Proficiency level of the Project</label>
                    <select id="proficiency" name="proficiency">
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                    </select>
                </div>
                <div class="form-group">
                  <label>Technical Skills (Select all that apply)</label>
                  <div class="checkbox-group">
                      <label><input type="checkbox" name="technical-skills" value="Python"> Python</label>
                      <label><input type="checkbox" name="technical-skills" value="JavaScript"> JavaScript</label>
                      <label><input type="checkbox" name="technical-skills" value="Machine Learning"> Machine Learning</label>
                      <label><input type="checkbox" name="technical-skills" value="Data Analysis"> Data Analysis</label>
                      <label><input type="checkbox" name="technical-skills" value="Web Development"> Web Development</label>
                      <label><input type="checkbox" name="technical-skills" value="Mobile Development"> Mobile Development</label>
                      <label><input type="checkbox" name="technical-skills" value="Other"> Other</label>
                  </div>
              </div>
            </div>
            <div class="form-column">
                <div class="form-group">
                    <label for="time-frame">Time available to build</label>
                    <select id="time-frame" name="time-frame">
                        <option value="semester-long">semester-long</option>
                        <option value="month-long">month-long</option>
                        <option value="week-long">week-long</option>
                        <option value="Custom">Custom</option>
                    </select>
                </div>
                <div class="form-group" id="custom-time-container" style="display: none;">
                    <label for="custom-time">Specify custom time interval</label>
                    <input type="text" id="custom-time" name="custom-time">
                </div>
                <div class="form-group">
                    <label for="team-size">Team Size</label>
                    <input type="number" id="team-size" name="team-size" min="1" max="10" value="1">
                </div>
                <div class="form-group">
                  <label>Project Goals (Select one)</label>
                  <div class="radio-group">
                      <label><input type="radio" name="project-goals" value="Learning"> Learning</label>
                      <label><input type="radio" name="project-goals" value="Commercial Potential"> Commercial Potential</label>
                      <label><input type="radio" name="project-goals" value="Social Impact"> Social Impact</label>
                      <label><input type="radio" name="project-goals" value="Research"> Research</label>
                      <label><input type="radio" name="project-goals" value="Other"> Other</label>
                  </div>
              </div>
            </div>
        </div>
        <div class="form-group">
            <label for="theme">Any specific theme, problem statement, or ideas in mind? (Required)</label>
            <textarea id="theme" name="theme" rows="4"></textarea>
        </div>
        <button id="generate-ideas" class="btn">Generate Ideas</button>
        <div id="loading" style="display: none;">Generating ideas... Please wait.</div>
        <button id="generate-more" class="btn" style="display: none;">Generate More</button>
        <div id="ideas-container"></div>
        </div>

    <div id="chatModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Chat with Idea</h2>
            <div id="chatHistory"></div>
            <input type="text" id="chatInput" placeholder="Ask a question about this idea...">
            <button id="sendChatButton">Send</button>
        </div>
    </div>

    </section>
    <footer>
      <p>Copyright &#169; 2023 Om Bhojane.</p>
    </footer>
    <script src="/static/js/script.js"></script>

    <script>

document.addEventListener('DOMContentLoaded', () => {
        const categorySelect = document.getElementById('category');
        const otherCategoryContainer = document.getElementById('other-category-container');
        const timeFrameSelect = document.getElementById('time-frame');
        const customTimeContainer = document.getElementById('custom-time-container');
        const generateButton = document.getElementById('generate-ideas');
        const ideasContainer = document.getElementById('ideas-container');
        const loadingElement = document.getElementById('loading');

        let generatedIdeas = [];
        let isFirstGeneration = true;

        categorySelect.addEventListener('change', () => {
            otherCategoryContainer.style.display = categorySelect.value === 'Other' ? 'block' : 'none';
        });

        timeFrameSelect.addEventListener('change', () => {
            customTimeContainer.style.display = timeFrameSelect.value === 'Custom' ? 'block' : 'none';
        });

        generateButton.addEventListener('click', generateIdeas);

        let isGenerating = false;

        async function generateIdeas() {
    if (isGenerating) {
        alert('Please wait, ideas are still being generated.');
        return;
    }

    isGenerating = true;
    const data = {
        category: categorySelect.value === 'Other' ? document.getElementById('other-category').value : categorySelect.value,
        proficiency: document.getElementById('proficiency').value,
        time_frame: timeFrameSelect.value === 'Custom' ? document.getElementById('custom-time').value : timeFrameSelect.value,
        team_size: parseInt(document.getElementById('team-size').value),
        technical_skills: Array.from(document.querySelectorAll('input[name="technical-skills"]:checked')).map(checkbox => checkbox.value),
        project_goals: [document.querySelector('input[name="project-goals"]:checked').value],
        theme: document.getElementById('theme').value,
        exclude_ideas: isFirstGeneration ? [] : generatedIdeas.map(idea => idea.title)
    };

    try {
        loadingElement.style.display = 'block';
        if (isFirstGeneration) {
            ideasContainer.innerHTML = '';
        }
        
        const response = await fetch('/generate_ideas', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        });
        
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        
        const result = await response.json();
        console.log(result.message);
        
        // Wait for ideas to be generated (adjust the timeout as needed)
        await new Promise(resolve => setTimeout(resolve, 5000));

        // Fetch the generated ideas
        const ideasResponse = await fetch('/get_latest_ideas');
        if (!ideasResponse.ok) {
            throw new Error('Failed to fetch generated ideas');
        }
        const ideas = await ideasResponse.json();

        if (ideas.message === "No ideas generated yet") {
            throw new Error('No ideas generated');
        }

        generatedIdeas = [...generatedIdeas, ...ideas];
        displayIdeas(ideas, !isFirstGeneration);
    } catch (error) {
        console.error('Error:', error);
        alert('Failed to generate ideas. Please try again.');
    } finally {
        loadingElement.style.display = 'none';
        isGenerating = false;
        isFirstGeneration = false;
        document.getElementById('generate-more').style.display = 'inline-block';
    }
}

async function pollForIdeas() {
    const maxAttempts = 30;
    let attempts = 0;

    while (attempts < maxAttempts) {
        try {
            const response = await fetch('/get_latest_ideas');
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            
            if (data.message === "No ideas generated yet") {
                await new Promise(resolve => setTimeout(resolve, 1000));
                attempts++;
            } else {
                generatedIdeas = [...generatedIdeas, ...data];
                displayIdeas(data, !isFirstGeneration);
                return;
            }
        } catch (error) {
            console.error('Error polling for ideas:', error);
            break;
        }
    }
    
    alert('Ideas generation is taking longer than expected. Please try again later.');
}

generateButton.addEventListener('click', generateIdeas);

function displayIdeas(ideas, append = false) {
    if (!append) {
        ideasContainer.innerHTML = '';
    }
    ideas.forEach((idea, index) => {
        const ideaElement = document.createElement('div');
        ideaElement.classList.add('idea');
        ideaElement.innerHTML = `
            <h3>${idea.title}</h3>
            <p><strong>Description:</strong> ${idea.description}</p>
            <p><strong>Key Features:</strong></p>
            <ul>
                ${idea.features.map(feature => `<li>${feature}</li>`).join('')}
            </ul>
            <p><strong>Potential Impact:</strong> ${idea.impact}</p>
            <p><strong>Implementation Steps:</strong></p>
            <ol>
                ${idea.implementation_steps.map(step => `<li>${step}</li>`).join('')}
            </ol>
            <p><strong>Recommended Tech Stack:</strong></p>
            <ul>
                ${idea.tech_stack.map(tech => `<li><strong>${tech.name}:</strong> ${tech.reason}</li>`).join('')}
            </ul>
            <div class="idea-actions">
                <div class="primary-actions">
                    <button class="btn reserve-btn" data-id="${idea.id}">Reserve Idea</button>
                    <button class="btn chat-btn" data-id="${generatedIdeas.length - ideas.length + index}">Chat with Idea</button>
                </div>
                <div class="secondary-actions">
                    <button class="btn copy-btn" data-id="${generatedIdeas.length - ideas.length + index}">Copy Idea</button>
                    <a href="/download_pdf/${idea.id}" class="btn download-btn" target="_blank">Download PDF</a>
                </div>
                <div class="social-share">
                    <button class="share-btn twitter-share" title="Share on Twitter">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                    </button>
                    <button class="share-btn whatsapp-share" title="Share on WhatsApp">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                        </svg>
                    </button>
                    <button class="share-btn linkedin-share" title="Share on LinkedIn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                            <rect x="2" y="9" width="4" height="12"></rect>
                            <circle cx="4" cy="4" r="2"></circle>
                        </svg>
                    </button>
                </div>
            </div>
        `;
        ideasContainer.appendChild(ideaElement);
        ideaElement.querySelector('.twitter-share').addEventListener('click', () => shareOnTwitter(idea));
        ideaElement.querySelector('.whatsapp-share').addEventListener('click', () => shareOnWhatsApp(idea));
        ideaElement.querySelector('.linkedin-share').addEventListener('click', () => shareOnLinkedIn(idea));
    });

    // Add event listeners for buttons
    document.querySelectorAll('.reserve-btn').forEach(button => {
        button.addEventListener('click', reserveIdea);
    });
    document.querySelectorAll('.copy-btn').forEach(button => {
        button.addEventListener('click', copyIdea);
    });
    document.querySelectorAll('.chat-btn').forEach(button => {
        button.addEventListener('click', openChatModal);
    });
}

document.getElementById('generate-more').addEventListener('click', generateIdeas);

function shareOnTwitter(idea) {
    const text = encodeURIComponent(`I found this amazing project idea on IdeaGen: ${idea.title}. Check it out!`);
    const url = encodeURIComponent('https://omsdev.vercel.app/ideagen');
    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
}

function shareOnWhatsApp(idea) {
    const text = encodeURIComponent(`Check out this amazing project idea I found on IdeaGen: ${idea.title}`);
    const url = encodeURIComponent('https://omsdev.vercel.app/ideagen');
    window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
}

function shareOnLinkedIn(idea) {
    const url = encodeURIComponent('https://omsdev.vercel.app/ideagen');
    const title = encodeURIComponent(idea.title);
    const summary = encodeURIComponent(`Check out this amazing project idea I found on IdeaGen: ${idea.title}`);
    window.open(`https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}&summary=${summary}`, '_blank');
}

async function reserveIdea(event) {
            const ideaId = event.target.getAttribute('data-id');
            try {
                const response = await fetch('/reserve_idea', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ idea_id: ideaId }),
                });
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const data = await response.json();
                if (data.success) {
                    alert('Idea reserved successfully!');
                    event.target.disabled = true;
                    event.target.textContent = 'Reserved';
                } else {
                    alert('Failed to reserve idea. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to reserve idea. Please try again.');
            }
        }

        function copyIdea(event) {
    const index = event.target.getAttribute('data-id');
    const idea = ideasContainer.querySelectorAll('.idea')[index];
    const ideaText = idea.innerText;
    
    navigator.clipboard.writeText(ideaText).then(() => {
        alert('Idea copied to clipboard!');
    }).catch(err => {
        console.error('Failed to copy text: ', err);
    });
}
    });
    </script>
    <script src="/static/js/ideagen.js"></script>
  </body>
</html>